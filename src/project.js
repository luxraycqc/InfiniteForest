require=function l(c,d,r){function u(t,e){if(!d[t]){if(!c[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=d[t]={exports:{}};c[t][0].call(o.exports,function(e){return u(c[t][1][e]||e)},o,o.exports,l,c,d,r)}return d[t].exports}for(var s="function"==typeof require&&require,e=0;e<r.length;e++)u(r[e]);return u}({ChangeDialogue:[function(e,t,a){"use strict";cc._RF.push(t,"80fd7FttYxOA7Bx0+9sEynP","ChangeDialogue"),cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},label1:{default:null,type:cc.Label},label2:{default:null,type:cc.Label},button1:{default:null,type:cc.Node},button2:{default:null,type:cc.Node},button1Prefab:{default:null,type:cc.Prefab},button2Prefab:{default:null,type:cc.Prefab},index:0},changeDialogue:function(){0==this.index?(this.label1.string="",this.label2.string="勇士：什么魔法？",this.index++):1==this.index?(this.label1.string="魔王：我练就了一种能够随意改变森林布局的魔法，森林中的树木、道路和所有宝物的位置都在我的意念操纵下。只要你愿意，你可以继续无限次地挑战我的无尽森林，但是绝不会像刚才那样简单。我承诺，你每过一关，我都会送你一个美女或100金币。",this.label2.string="",this.index++):2==this.index&&(this.label1.string="",this.button1=cc.instantiate(this.button1Prefab),this.button2=cc.instantiate(this.button2Prefab),this.canvas.addChild(this.button1,0),this.canvas.addChild(this.button2,0),this.index++,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.systemEvent.off(cc.Node.EventType.TOUCH_START),cc.systemEvent.off(cc.Node.EventType.MOUSE_DOWN))},start:function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){t.changeDialogue()}),cc.systemEvent.on(cc.Node.EventType.TOUCH_START,function(e){t.changeDialogue()}),cc.systemEvent.on(cc.Node.EventType.MOUSE_DOWN,function(e){t.changeDialogue()})}}),cc._RF.pop()},{}],Player2:[function(e,t,a){"use strict";cc._RF.push(t,"dfbc5hPqhdOgZMOMIBxG0sn","Player2");var n=cc.Class({name:"NodeData"}),o=cc.Class({name:"NodeDataArray"});cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},background:{default:null,type:cc.Node},monster1:{default:null,type:cc.Node},redJewel:{default:null,type:cc.Node},yellowJewel:{default:null,type:cc.Node},blueJewel:{default:null,type:cc.Node},greenJewel:{default:null,type:cc.Node},altar:{default:null,type:cc.Node},stepLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},jewelLabel:{default:null,type:cc.Label},nodeData:o,currentNode:0,stepCount:500,lifeCount:3,redJewelGot:!1,yellowJewelGot:!1,blueJewelGot:!1,greenJewelGot:!1,monster1Alive:!0,monster1Prefab:{default:null,type:cc.Prefab},redJewelPrefab:{default:null,type:cc.Prefab},yellowJewelPrefab:{default:null,type:cc.Prefab},blueJewelPrefab:{default:null,type:cc.Prefab},greenJewelPrefab:{default:null,type:cc.Prefab},altarPrefab:{default:null,type:cc.Prefab},fr:{default:null,type:cc.Prefab},lf:{default:null,type:cc.Prefab},lfr:{default:null,type:cc.Prefab},lr:{default:null,type:cc.Prefab},l:{default:null,type:cc.Prefab},f:{default:null,type:cc.Prefab},r:{default:null,type:cc.Prefab},bug:{default:null,type:cc.Prefab},leftbound:-50,rightbound:50,upbound:-220,downbound:-300},DFS:function(e){var t=this;if(!(null!=t.nodeData[e]||44<e||e<-44||Math.abs(e)%10==5)){t.nodeData[e]=new n,null!=t.nodeData[e+10]&&(t.nodeData[e+10].down?t.nodeData[e].up=!0:t.nodeData[e].up=!1),null!=t.nodeData[e-10]&&(t.nodeData[e-10].up?t.nodeData[e].down=!0:t.nodeData[e].down=!1),null!=t.nodeData[e+1]&&(t.nodeData[e+1].left?t.nodeData[e].right=!0:t.nodeData[e].right=!1),null!=t.nodeData[e-1]&&(t.nodeData[e-1].right?t.nodeData[e].left=!0:t.nodeData[e].left=!1),35<e&&(t.nodeData[e].up=!1),e<-35&&(t.nodeData[e].down=!1),(e+100)%10==4&&(t.nodeData[e].right=!1),(e+100)%10==6&&(t.nodeData[e].left=!1);var a=14*cc.random0To1();null==t.nodeData[e].up&&(t.nodeData[e].up=a<6||10<=a&&a<12),null==t.nodeData[e].down&&(Math.floor(a)%2==1?t.nodeData[e].down=!0:t.nodeData[e].down=!1),null==t.nodeData[e].left&&(t.nodeData[e].left=a<10&&2<=a),null==t.nodeData[e].right&&(t.nodeData[e].right=a<2||4<=a&&a<8||12<=a),t.nodeData[e].up&&!t.nodeData[e].left&&t.nodeData[e].right?t.nodeData[e].tag=t.fr:t.nodeData[e].up&&t.nodeData[e].left&&!t.nodeData[e].right?t.nodeData[e].tag=t.lf:t.nodeData[e].up&&t.nodeData[e].left&&t.nodeData[e].right?t.nodeData[e].tag=t.lfr:!t.nodeData[e].up&&t.nodeData[e].left&&t.nodeData[e].right?t.nodeData[e].tag=t.lr:t.nodeData[e].up||!t.nodeData[e].left||t.nodeData[e].right?!t.nodeData[e].up||t.nodeData[e].left||t.nodeData[e].right?t.nodeData[e].up||t.nodeData[e].left||!t.nodeData[e].right?(cc.log("出现bug节点:"+e),t.nodeData[e].tag=t.bug):t.nodeData[e].tag=t.r:t.nodeData[e].tag=t.f:t.nodeData[e].tag=t.l,t.nodeData[e].up&&t.DFS(e+10),t.nodeData[e].down&&t.DFS(e-10),t.nodeData[e].left&&t.DFS(e-1),t.nodeData[e].right&&t.DFS(e+1)}},onLoad:function(){var e=this,t=14*cc.random0To1();e.nodeData=new o,e.nodeData[0]=new n,t<2?(e.nodeData[0].tag=e.fr,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!0,t<1&&(e.nodeData[0].down=!1)):t<4?(e.nodeData[0].tag=e.lf,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!1,t<3&&(e.nodeData[0].down=!1)):t<6?(e.nodeData[0].tag=e.lfr,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!0,t<5&&(e.nodeData[0].down=!1)):t<8?(e.nodeData[0].tag=e.lr,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!0,t<7&&(e.nodeData[0].down=!1)):t<10?(e.nodeData[0].tag=e.l,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!1,t<9&&(e.nodeData[0].down=!1)):t<12?(e.nodeData[0].tag=e.f,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!1,t<11&&(e.nodeData[0].down=!1)):(e.nodeData[0].tag=e.r,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!0,t<13&&(e.nodeData[0].down=!1)),e.nodeData[0].up&&e.DFS(10),e.nodeData[0].down&&e.DFS(-10),e.nodeData[0].left&&e.DFS(-1),e.nodeData[0].right&&e.DFS(1)},start:function(){this.background=cc.instantiate(this.nodeData[0].tag),this.canvas.addChild(this.background,-1),this.setInputControl()},getProperScale:function(){return(700-this.node.y)/1e3},setInputControl:function(){var a=this.node,n=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){var t=50;switch(e.keyCode){case cc.KEY.up:if((a.x>n.rightbound+t||a.x<n.leftbound-t)&&a.y>n.upbound)break;if(!n.nodeData[n.currentNode].up&&a.y>=n.upbound)break;a.y+=50,n.stepCount--,320<=a.y&&(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode+10].tag),n.canvas.addChild(n.background,-1),a.y=-300,n.currentNode+=10,cc.log(n.currentNode),n.nodeData[n.currentNode].up||n.nodeData[n.currentNode].left||n.nodeData[n.currentNode].right||(n.nodeData[n.currentNode-10].up=!1,n.stepCount+=100)),a.setScale(n.getProperScale(),n.getProperScale());break;case cc.KEY.down:if((a.x>n.rightbound+t||a.x<n.leftbound-t)&&a.y<=n.downbound)break;a.y-=50,n.stepCount--,a.y<=-320&&(n.nodeData[n.currentNode].down?(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode-10].tag),n.canvas.addChild(n.background,-1),a.y=300,n.currentNode-=10,cc.log(n.currentNode)):(a.y+=50,n.stepCount++)),a.setScale(n.getProperScale(),n.getProperScale());break;case cc.KEY.left:if((a.x>n.rightbound+t||a.x<n.leftbound)&&a.y>n.upbound+50)break;if(!n.nodeData[n.currentNode].left&&a.x<n.leftbound)break;a.x-=t,n.stepCount--,a.x<=-480&&(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode-1].tag),n.canvas.addChild(n.background,-1),a.x=480,n.currentNode--,cc.log(n.currentNode));break;case cc.KEY.right:if((a.x>n.rightbound||a.x<n.leftbound-t)&&a.y>n.upbound+50)break;if(!n.nodeData[n.currentNode].right&&a.x>n.rightbound)break;a.x+=t,n.stepCount--,480<=a.x&&(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode+1].tag),n.canvas.addChild(n.background,-1),a.x=-480,n.currentNode++,cc.log(n.currentNode))}})}}),cc._RF.pop()},{}],Player:[function(e,t,a){"use strict";cc._RF.push(t,"e281a0+m+NJHIQ7RH8LQT5y","Player"),cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},background:{default:null,type:cc.Node},monster1:{default:null,type:cc.Node},redJewel:{default:null,type:cc.Node},yellowJewel:{default:null,type:cc.Node},blueJewel:{default:null,type:cc.Node},greenJewel:{default:null,type:cc.Node},altar:{default:null,type:cc.Node},stepLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},jewelLabel:{default:null,type:cc.Label},layout1:{default:null,type:cc.Layout},layout2:{default:null,type:cc.Layout},currentNode:0,stepCount:500,lifeCount:3,redJewelGot:!1,yellowJewelGot:!1,blueJewelGot:!1,greenJewelGot:!1,monster1Alive:!0,monster1Prefab:{default:null,type:cc.Prefab},redJewelPrefab:{default:null,type:cc.Prefab},yellowJewelPrefab:{default:null,type:cc.Prefab},blueJewelPrefab:{default:null,type:cc.Prefab},greenJewelPrefab:{default:null,type:cc.Prefab},altarPrefab:{default:null,type:cc.Prefab},fr:{default:null,type:cc.Prefab},lf:{default:null,type:cc.Prefab},lfr:{default:null,type:cc.Prefab},lr:{default:null,type:cc.Prefab},l:{default:null,type:cc.Prefab},f:{default:null,type:cc.Prefab},r:{default:null,type:cc.Prefab},leftbound:-50,rightbound:50,upbound:-220,downbound:-300},onLoad:function(){this.background=cc.instantiate(this.fr),this.canvas.addChild(this.background,-1),this.setInputControl()},getProperScale:function(){return(700-this.node.y)/1e3},setInputControl:function(){var n=this.node,o=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){var t=50,a=50;switch(e.keyCode){case cc.KEY.up:if((n.x>o.rightbound+t||n.x<o.leftbound-t)&&n.y>o.upbound)break;if((12==o.currentNode||13==o.currentNode||14==o.currentNode)&&n.y>=o.upbound)break;if(n.y+=a,o.stepCount--,320<=n.y)switch(o.currentNode){case 0:case 2:case 5:o.background.destroy(),o.background=cc.instantiate(o.fr),o.canvas.addChild(o.background,-1),n.y=-300,o.currentNode+=4;break;case 1:case 3:case 6:o.background.destroy(),o.background=cc.instantiate(o.lf),o.canvas.addChild(o.background,-1),n.y=-300,o.currentNode+=4;break;case 4:case 7:o.background.destroy(),o.background=cc.instantiate(o.f),o.canvas.addChild(o.background,-1),n.y=-300,o.currentNode+=4;break;case 9:case 10:o.background.destroy(),o.background=cc.instantiate(o.lr),o.canvas.addChild(o.background,-1),n.y=-300,o.currentNode+=4;break;case 8:o.background.destroy(),o.background=cc.instantiate(o.r),o.canvas.addChild(o.background,-1),n.y=-300,o.currentNode+=4;break;case 12:case 13:case 14:case 15:n.y-=a,o.stepCount++;break;case 11:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),n.y=-300,o.currentNode+=4}n.setScale(o.getProperScale(),o.getProperScale());break;case cc.KEY.down:if((n.x>o.rightbound+t||n.x<o.leftbound-t)&&n.y<=o.downbound)break;if(n.y-=a,o.stepCount--,n.y<=-320)switch(o.currentNode){case 5:case 6:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),n.y=300,o.currentNode-=4;break;case 4:case 8:case 10:case 13:o.background.destroy(),o.background=cc.instantiate(o.fr),o.canvas.addChild(o.background,-1),n.y=300,o.currentNode-=4;break;case 7:case 9:case 11:case 14:o.background.destroy(),o.background=cc.instantiate(o.lf),o.canvas.addChild(o.background,-1),n.y=300,o.currentNode-=4;break;case 12:case 15:o.background.destroy(),o.background=cc.instantiate(o.f),o.canvas.addChild(o.background,-1),n.y=300,o.currentNode-=4;break;case 0:case 1:case 2:case 3:n.y+=a,o.stepCount++}n.setScale(o.getProperScale(),o.getProperScale());break;case cc.KEY.left:if((n.x>o.rightbound+t||n.x<o.leftbound)&&n.y>o.upbound+a)break;if((0==o.currentNode||4==o.currentNode||6==o.currentNode||8==o.currentNode||9==o.currentNode||11==o.currentNode||12==o.currentNode)&&n.x<o.leftbound)break;if(n.x-=t,o.stepCount--,n.x<=-480)switch(o.currentNode){case 2:case 3:case 5:case 6:case 9:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),n.x=480,o.currentNode--;break;case 1:case 5:case 7:case 10:o.background.destroy(),o.background=cc.instantiate(o.fr),o.canvas.addChild(o.background,-1),n.x=480,o.currentNode--;break;case 0:case 4:case 6:case 8:case 9:case 11:case 12:n.x+=t,o.stepCount++;break;case 13:o.background.destroy(),o.background=cc.instantiate(o.r),o.canvas.addChild(o.background,-1),n.x=480,o.currentNode--;break;case 14:case 15:o.background.destroy(),o.background=cc.instantiate(o.lr),o.canvas.addChild(o.background,-1),n.x=480,o.currentNode--}n.setScale(o.getProperScale(),o.getProperScale());break;case cc.KEY.right:if((n.x>o.rightbound||n.x<o.leftbound-t)&&n.y>o.upbound+a)break;if((3==o.currentNode||5==o.currentNode||7==o.currentNode||8==o.currentNode||10==o.currentNode||11==o.currentNode)&&n.x>o.rightbound)break;if(n.x+=t,o.stepCount--,480<=n.x)switch(o.currentNode){case 0:case 1:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),n.x=-480,o.currentNode++;break;case 2:case 4:case 6:case 9:o.background.destroy(),o.background=cc.instantiate(o.lf),o.canvas.addChild(o.background,-1),n.x=-480,o.currentNode++;break;case 3:case 5:case 7:case 8:case 10:case 11:case 15:n.x-=t,o.stepCount++;break;case 12:case 13:o.background.destroy(),o.background=cc.instantiate(o.lr),o.canvas.addChild(o.background,-1),n.x=-480,o.currentNode++;break;case 14:o.background.destroy(),o.background=cc.instantiate(o.lfr),o.canvas.addChild(o.background,-1),n.x=-480,o.currentNode++}n.setScale(o.getProperScale(),o.getProperScale())}o.stepLabel.string="体力："+o.stepCount,o.lifeLabel.string="生命："+o.lifeCount,o.countJewels(),0==o.stepCount||o.lifeCount,3==o.currentNode?null==o.monster1&&o.monster1Alive?(o.monster1=cc.instantiate(o.monster1Prefab),o.canvas.addChild(o.monster1,-1)):null!=o.monster1&&cc.pDistance(n.position,o.monster1.position)<120&&(o.monster1.destroy(),o.monster1=null,o.monster1Alive=!1,o.lifeCount--):null!=o.monster1&&(o.monster1.destroy(),o.monster1=null),3==o.currentNode?null!=o.redJewel||o.redJewelGot?null!=o.redJewel&&cc.pDistance(n.position,o.redJewel.position)<100&&(o.redJewel.destroy(),o.redJewel=null,o.redJewelGot=!0):(o.redJewel=cc.instantiate(o.redJewelPrefab),o.canvas.addChild(o.redJewel,-1),o.redJewel.y=180):null!=o.redJewel&&(o.redJewel.destroy(),o.redJewel=null),6==o.currentNode?null!=o.yellowJewel||o.yellowJewelGot?null!=o.yellowJewel&&cc.pDistance(n.position,o.yellowJewel.position)<100&&(o.yellowJewel.destroy(),o.yellowJewel=null,o.yellowJewelGot=!0):(o.yellowJewel=cc.instantiate(o.yellowJewelPrefab),o.canvas.addChild(o.yellowJewel,-1)):null!=o.yellowJewel&&(o.yellowJewel.destroy(),o.yellowJewel=null),9==o.currentNode?null!=o.blueJewel||o.blueJewelGot?null!=o.blueJewel&&cc.pDistance(n.position,o.blueJewel.position)<100&&(o.blueJewel.destroy(),o.blueJewel=null,o.blueJewelGot=!0):(o.blueJewel=cc.instantiate(o.blueJewelPrefab),o.canvas.addChild(o.blueJewel,-1)):null!=o.blueJewel&&(o.blueJewel.destroy(),o.blueJewel=null),10==o.currentNode?null!=o.greenJewel||o.greenJewelGot?null!=o.greenJewel&&cc.pDistance(n.position,o.greenJewel.position)<100&&(o.greenJewel.destroy(),o.greenJewel=null,o.greenJewelGot=!0):(o.greenJewel=cc.instantiate(o.greenJewelPrefab),o.canvas.addChild(o.greenJewel,-1)):null!=o.greenJewel&&(o.greenJewel.destroy(),o.greenJewel=null),15==o.currentNode?null==o.altar?(o.altar=cc.instantiate(o.altarPrefab),o.canvas.addChild(o.altar,-1)):o.redJewelGot&&o.yellowJewelGot&&o.blueJewelGot&&o.greenJewelGot&&cc.pDistance(n.position,o.altar.position)<100&&(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.director.loadScene("interlude")):null!=o.altar&&(o.altar.destroy(),o.altar=null),null!=o.layout1.node?o.layout1.node.destroy():null!=o.layout2.node&&o.layout2.node.destroy()})},countJewels:function(){this.jewelLabel.string="已获得宝石：",this.redJewelGot&&(this.jewelLabel.string+="\n红宝石"),this.yellowJewelGot&&(this.jewelLabel.string+="\n黄宝石"),this.blueJewelGot&&(this.jewelLabel.string+="\n蓝宝石"),this.greenJewelGot&&(this.jewelLabel.string+="\n绿宝石")}}),cc._RF.pop()},{}],Start:[function(e,t,a){"use strict";cc._RF.push(t,"6b600Kh6FNB3qffKZZWwmcD","Start"),cc.Class({extends:cc.Component,properties:{},startGame:function(){cc.director.loadScene("game")},startChallenge:function(){cc.director.loadScene("challenge")},goHome:function(){cc.director.loadScene("titlepage")}}),cc._RF.pop()},{}]},{},["ChangeDialogue","Player","Player2","Start"]);