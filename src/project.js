require=function o(d,r,c){function u(t,e){if(!r[t]){if(!d[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var l=r[t]={exports:{}};d[t][0].call(l.exports,function(e){return u(d[t][1][e]||e)},l,l.exports,o,d,r,c)}return r[t].exports}for(var s="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({ChangeDialogue:[function(e,t,a){"use strict";cc._RF.push(t,"80fd7FttYxOA7Bx0+9sEynP","ChangeDialogue"),cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},label1:{default:null,type:cc.Label},label2:{default:null,type:cc.Label},button1:{default:null,type:cc.Node},button2:{default:null,type:cc.Node},button1Prefab:{default:null,type:cc.Prefab},button2Prefab:{default:null,type:cc.Prefab},index:0},changeDialogue:function(){0==this.index?(this.label1.string="",this.label2.string="勇士：什么魔法？",this.index++):1==this.index?(this.label1.string="魔王：我练就了一种能够随意改变森林布局的魔法，森林中的树木、道路和所有宝物的位置都在我的意念操纵下。只要你愿意，你可以继续无限次地挑战我的无尽森林，但是绝不会像刚才那样简单。我承诺，你每过一关，我都会送你100个金币。",this.label2.string="",this.index++):2==this.index&&(this.label1.string="",this.button1=cc.instantiate(this.button1Prefab),this.button2=cc.instantiate(this.button2Prefab),this.canvas.addChild(this.button1,0),this.canvas.addChild(this.button2,0),this.index++,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.systemEvent.off(cc.Node.EventType.TOUCH_START),cc.systemEvent.off(cc.Node.EventType.MOUSE_DOWN))},start:function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){t.changeDialogue()}),cc.systemEvent.on(cc.Node.EventType.TOUCH_START,function(e){t.changeDialogue()}),cc.systemEvent.on(cc.Node.EventType.MOUSE_DOWN,function(e){t.changeDialogue()})}}),cc._RF.pop()},{}],MoneyNode:[function(e,t,a){"use strict";cc._RF.push(t,"9c32bv/9PFHy6bqGlTPckM6","MoneyNode"),cc.Class({extends:cc.Component,properties:{money:0},start:function(){}}),cc._RF.pop()},{}],Player2:[function(e,t,a){"use strict";cc._RF.push(t,"dfbc5hPqhdOgZMOMIBxG0sn","Player2");var n=cc.Class({name:"NodeData"}),l=cc.Class({name:"NodeDataArray"});cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},background:{default:null,type:cc.Node},monster1:{default:null,type:cc.Node},monster2:{default:null,type:cc.Node},redJewel:{default:null,type:cc.Node},yellowJewel:{default:null,type:cc.Node},blueJewel:{default:null,type:cc.Node},greenJewel:{default:null,type:cc.Node},altar:{default:null,type:cc.Node},stepLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},jewelLabel:{default:null,type:cc.Label},moneyLabel:{default:null,type:cc.Label},nodeLabel:{default:null,type:cc.Label},nodeData:l,currentNode:0,validNodeCount:0,stepCount:500,lifeCount:3,moneyNode:{default:null,type:cc.Node},redJewelGot:!1,yellowJewelGot:!1,blueJewelGot:!1,greenJewelGot:!1,monster1Alive:!0,monster1Prefab:{default:null,type:cc.Prefab},monster2Alive:!0,monster2Prefab:{default:null,type:cc.Prefab},redJewelPrefab:{default:null,type:cc.Prefab},yellowJewelPrefab:{default:null,type:cc.Prefab},blueJewelPrefab:{default:null,type:cc.Prefab},greenJewelPrefab:{default:null,type:cc.Prefab},altarPrefab:{default:null,type:cc.Prefab},fr:{default:null,type:cc.Prefab},lf:{default:null,type:cc.Prefab},lfr:{default:null,type:cc.Prefab},lr:{default:null,type:cc.Prefab},l:{default:null,type:cc.Prefab},f:{default:null,type:cc.Prefab},r:{default:null,type:cc.Prefab},bug:{default:null,type:cc.Prefab},button0Prefab:{default:null,type:cc.Prefab},leftbound:-50,rightbound:50,upbound:-220,downbound:-300},DFS:function(e){var t=this;if(!(null!=t.nodeData[e]||44<e||e<-44||Math.abs(e)%10==5)){t.nodeData[e]=new n,null!=t.nodeData[e+10]&&(t.nodeData[e+10].down?t.nodeData[e].up=!0:t.nodeData[e].up=!1),null!=t.nodeData[e-10]&&(t.nodeData[e-10].up?t.nodeData[e].down=!0:t.nodeData[e].down=!1),null!=t.nodeData[e+1]&&(t.nodeData[e+1].left?t.nodeData[e].right=!0:t.nodeData[e].right=!1),null!=t.nodeData[e-1]&&(t.nodeData[e-1].right?t.nodeData[e].left=!0:t.nodeData[e].left=!1),35<e&&(t.nodeData[e].up=!1),e<-35&&(t.nodeData[e].down=!1),(e+100)%10==4&&(t.nodeData[e].right=!1),(e+100)%10==6&&(t.nodeData[e].left=!1);var a=14*cc.random0To1();null==t.nodeData[e].up&&(t.nodeData[e].up=a<6||10<=a&&a<12),null==t.nodeData[e].down&&(Math.floor(a)%2==1?t.nodeData[e].down=!0:t.nodeData[e].down=!1),null==t.nodeData[e].left&&(t.nodeData[e].left=a<10&&2<=a),null==t.nodeData[e].right&&(t.nodeData[e].right=a<2||4<=a&&a<8||12<=a),t.nodeData[e].up&&!t.nodeData[e].left&&t.nodeData[e].right?(t.nodeData[e].tag=t.fr,t.nodeData[e].valid=!0):t.nodeData[e].up&&t.nodeData[e].left&&!t.nodeData[e].right?(t.nodeData[e].tag=t.lf,t.nodeData[e].valid=!0):t.nodeData[e].up&&t.nodeData[e].left&&t.nodeData[e].right?(t.nodeData[e].tag=t.lfr,t.nodeData[e].valid=!0):!t.nodeData[e].up&&t.nodeData[e].left&&t.nodeData[e].right?(t.nodeData[e].tag=t.lr,t.nodeData[e].valid=!0):t.nodeData[e].up||!t.nodeData[e].left||t.nodeData[e].right?!t.nodeData[e].up||t.nodeData[e].left||t.nodeData[e].right?t.nodeData[e].up||t.nodeData[e].left||!t.nodeData[e].right?t.nodeData[e].tag=t.bug:(t.nodeData[e].tag=t.r,t.nodeData[e].valid=!0):(t.nodeData[e].tag=t.f,t.nodeData[e].valid=!0):(t.nodeData[e].tag=t.l,t.nodeData[e].valid=!0),t.nodeData[e].valid&&(t.validNodeCount++,t.nodeData[e].absoluteValidIndex=t.validNodeCount),t.nodeData[e].up&&t.DFS(e+10),t.nodeData[e].down&&t.DFS(e-10),t.nodeData[e].left&&t.DFS(e-1),t.nodeData[e].right&&t.DFS(e+1)}},onLoad:function(){var e=this,t=14*cc.random0To1();e.nodeData=new l,e.nodeData[0]=new n,t<2?(e.nodeData[0].tag=e.fr,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!0,t<1&&(e.nodeData[0].down=!1)):t<4?(e.nodeData[0].tag=e.lf,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!1,t<3&&(e.nodeData[0].down=!1)):t<6?(e.nodeData[0].tag=e.lfr,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!0,t<5&&(e.nodeData[0].down=!1)):t<8?(e.nodeData[0].tag=e.lr,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!0,t<7&&(e.nodeData[0].down=!1)):t<10?(e.nodeData[0].tag=e.l,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!0,e.nodeData[0].right=!1,t<9&&(e.nodeData[0].down=!1)):t<12?(e.nodeData[0].tag=e.f,e.nodeData[0].up=!0,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!1,t<11&&(e.nodeData[0].down=!1)):(e.nodeData[0].tag=e.r,e.nodeData[0].up=!1,e.nodeData[0].down=!0,e.nodeData[0].left=!1,e.nodeData[0].right=!0,t<13&&(e.nodeData[0].down=!1)),e.nodeData[0].up&&e.DFS(10),e.nodeData[0].down&&e.DFS(-10),e.nodeData[0].left&&e.DFS(-1),e.nodeData[0].right&&e.DFS(1)},start:function(){this.background=cc.instantiate(this.nodeData[0].tag),this.canvas.addChild(this.background,-1);var e=Math.floor(100*cc.random0To1());this.absoluteRedJewelNode=e%this.validNodeCount+1;var t=Math.floor(100*cc.random0To1());this.absoluteYellowJewelNode=t%this.validNodeCount+1;var a=Math.floor(100*cc.random0To1());this.absoluteBlueJewelNode=a%this.validNodeCount+1;var n=Math.floor(100*cc.random0To1());this.absoluteGreenJewelNode=n%this.validNodeCount+1;var l=Math.floor(100*cc.random0To1());this.absoluteAltarNode=l%this.validNodeCount+1;var o=Math.floor(100*cc.random0To1());this.absoluteMonster1Node=o%this.validNodeCount+1;var d=Math.floor(100*cc.random0To1());this.absoluteMonster2Node=d%this.validNodeCount+1,this.setInputControl(),cc.game.addPersistRootNode(this.moneyNode),this.moneyLabel.string="金币："+this.moneyNode.getComponent("MoneyNode").money},getProperScale:function(){return(700-this.node.y)/1e3},checkIfInstantiateSomething:function(){var e=this;e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteRedJewelNode?null!=e.redJewel||e.redJewelGot||(e.redJewel=cc.instantiate(e.redJewelPrefab),e.canvas.addChild(e.redJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.redJewel.x=-180:e.redJewel.x=180,e.redJewel.y=-250)):null!=e.redJewel&&(e.redJewel.destroy(),e.redJewel=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteYellowJewelNode?null!=e.yellowJewel||e.yellowJewelGot||(e.yellowJewel=cc.instantiate(e.yellowJewelPrefab),e.canvas.addChild(e.yellowJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.yellowJewel.x=-180:e.yellowJewel.x=180,e.yellowJewel.y=-250)):null!=e.yellowJewel&&(e.yellowJewel.destroy(),e.yellowJewel=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteBlueJewelNode?null!=e.blueJewel||e.blueJewelGot||(e.blueJewel=cc.instantiate(e.blueJewelPrefab),e.canvas.addChild(e.blueJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.blueJewel.x=-180:e.blueJewel.x=180,e.blueJewel.y=-250)):null!=e.blueJewel&&(e.blueJewel.destroy(),e.blueJewel=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteGreenJewelNode?null!=e.greenJewel||e.greenJewelGot||(e.greenJewel=cc.instantiate(e.greenJewelPrefab),e.canvas.addChild(e.greenJewel,-1),e.nodeData[e.currentNode].up||(e.nodeData[e.currentNode].left?e.greenJewel.x=-180:e.greenJewel.x=180,e.greenJewel.y=-250)):null!=e.greenJewel&&(e.greenJewel.destroy(),e.greenJewel=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteAltarNode?null==e.altar&&(e.altar=cc.instantiate(e.altarPrefab),e.canvas.addChild(e.altar,-1),e.nodeData[e.currentNode].up||(e.altar.y=-250)):null!=e.altar&&(e.altar.destroy(),e.altar=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteMonster1Node?null==e.monster1&&e.monster1Alive&&(e.monster1=cc.instantiate(e.monster1Prefab),e.canvas.addChild(e.monster1,-1),e.nodeData[e.currentNode].up||(e.monster1.y=-250)):null!=e.monster1&&(e.monster1.destroy(),e.monster1=null),e.nodeData[e.currentNode].absoluteValidIndex==e.absoluteMonster2Node?null==e.monster2&&e.monster2Alive&&(e.monster2=cc.instantiate(e.monster2Prefab),e.canvas.addChild(e.monster2,-1),e.nodeData[e.currentNode].up||(e.monster2.y=-200)):null!=e.monster2&&(e.monster2.destroy(),e.monster2=null)},setInputControl:function(){var a=this.node,n=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){var t=50;switch(e.keyCode){case cc.KEY.up:if((a.x>n.rightbound+t||a.x<n.leftbound-t)&&a.y>n.upbound)break;if(!n.nodeData[n.currentNode].up&&a.y>=n.upbound)break;a.y+=50,n.stepCount--,320<=a.y&&(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode+10].tag),n.canvas.addChild(n.background,-1),a.y=-300,n.currentNode+=10,n.nodeLabel.string=n.getNodeText(),n.nodeData[n.currentNode].up||n.nodeData[n.currentNode].left||n.nodeData[n.currentNode].right||(n.nodeData[n.currentNode-10].up=!1,n.stepCount+=100),n.checkIfInstantiateSomething()),a.setScale(n.getProperScale(),n.getProperScale());break;case cc.KEY.down:if((a.x>n.rightbound+t||a.x<n.leftbound-t)&&a.y<=n.downbound)break;a.y-=50,n.stepCount--,a.y<=-320&&(n.nodeData[n.currentNode].down?(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode-10].tag),n.canvas.addChild(n.background,-1),a.y=300,n.currentNode-=10,n.nodeLabel.string=n.getNodeText(),n.checkIfInstantiateSomething()):(a.y+=50,n.stepCount++)),a.setScale(n.getProperScale(),n.getProperScale());break;case cc.KEY.left:if((a.x>n.rightbound+t||a.x<n.leftbound)&&a.y>n.upbound+50)break;if(!n.nodeData[n.currentNode].left&&a.x<n.leftbound)break;a.x-=t,n.stepCount--,a.x<=-480&&(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode-1].tag),n.canvas.addChild(n.background,-1),a.x=480,n.currentNode--,n.nodeLabel.string=n.getNodeText(),n.checkIfInstantiateSomething());break;case cc.KEY.right:if((a.x>n.rightbound||a.x<n.leftbound-t)&&a.y>n.upbound+50)break;if(!n.nodeData[n.currentNode].right&&a.x>n.rightbound)break;a.x+=t,n.stepCount--,480<=a.x&&(n.background.destroy(),n.background=cc.instantiate(n.nodeData[n.currentNode+1].tag),n.canvas.addChild(n.background,-1),a.x=-480,n.currentNode++,n.nodeLabel.string=n.getNodeText(),n.checkIfInstantiateSomething())}n.nodeData[n.currentNode].absoluteValidIndex==n.absoluteRedJewelNode&&null!=n.redJewel&&cc.pDistance(a.position,n.redJewel.position)<100&&(n.redJewel.destroy(),n.redJewel=null,n.redJewelGot=!0),n.nodeData[n.currentNode].absoluteValidIndex==n.absoluteYellowJewelNode&&null!=n.yellowJewel&&cc.pDistance(a.position,n.yellowJewel.position)<100&&(n.yellowJewel.destroy(),n.yellowJewel=null,n.yellowJewelGot=!0),n.nodeData[n.currentNode].absoluteValidIndex==n.absoluteBlueJewelNode&&null!=n.blueJewel&&cc.pDistance(a.position,n.blueJewel.position)<100&&(n.blueJewel.destroy(),n.blueJewel=null,n.blueJewelGot=!0),n.nodeData[n.currentNode].absoluteValidIndex==n.absoluteGreenJewelNode&&null!=n.greenJewel&&cc.pDistance(a.position,n.greenJewel.position)<100&&(n.greenJewel.destroy(),n.greenJewel=null,n.greenJewelGot=!0),null!=n.monster1&&cc.pDistance(a.position,n.monster1.position)<120&&(n.monster1.destroy(),n.monster1=null,n.monster1Alive=!1,n.lifeCount--),null!=n.monster2&&cc.pDistance(a.position,n.monster2.position)<120&&(n.monster2.destroy(),n.monster2=null,n.monster2Alive=!1,n.lifeCount--),n.redJewelGot&&n.yellowJewelGot&&n.blueJewelGot&&n.greenJewelGot&&cc.pDistance(a.position,n.altar.position)<100&&(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.director.loadScene("challenge")),n.stepLabel.string="体力："+n.stepCount,n.lifeLabel.string="生命："+n.lifeCount,n.countJewels(),0!=n.stepCount&&0!=n.lifeCount||(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),n.stepLabel.string="你死了！",n.lifeLabel.string="",n.jewelLabel.string="",n.button0=cc.instantiate(n.button0Prefab),n.canvas.addChild(n.button0,1),cc.game.removePersistRootNode(n.moneyNode))})},getNodeText:function(){var e=Math.floor((this.currentNode+5)/10),t=(this.currentNode+100)%10;5<t&&(t-=10);var a="";return 0<e?a+="上"+e:e<0&&(a+="下"+-e),0<t?a+="右"+t:t<0&&(a+="左"+-t),0==e&&0==t&&(a+="原点"),"当前节点："+a},countJewels:function(){this.jewelLabel.string="已获得宝石：",this.redJewelGot&&(this.jewelLabel.string+="\n红宝石"),this.yellowJewelGot&&(this.jewelLabel.string+="\n黄宝石"),this.blueJewelGot&&(this.jewelLabel.string+="\n蓝宝石"),this.greenJewelGot&&(this.jewelLabel.string+="\n绿宝石")}}),cc._RF.pop()},{}],Player:[function(e,t,a){"use strict";cc._RF.push(t,"e281a0+m+NJHIQ7RH8LQT5y","Player"),cc.Class({extends:cc.Component,properties:{canvas:{default:null,type:cc.Node},background:{default:null,type:cc.Node},monster1:{default:null,type:cc.Node},redJewel:{default:null,type:cc.Node},yellowJewel:{default:null,type:cc.Node},blueJewel:{default:null,type:cc.Node},greenJewel:{default:null,type:cc.Node},altar:{default:null,type:cc.Node},stepLabel:{default:null,type:cc.Label},lifeLabel:{default:null,type:cc.Label},jewelLabel:{default:null,type:cc.Label},layout1:{default:null,type:cc.Layout},layout2:{default:null,type:cc.Layout},currentNode:0,stepCount:300,lifeCount:3,redJewelGot:!1,yellowJewelGot:!1,blueJewelGot:!1,greenJewelGot:!1,monster1Alive:!0,monster1Prefab:{default:null,type:cc.Prefab},redJewelPrefab:{default:null,type:cc.Prefab},yellowJewelPrefab:{default:null,type:cc.Prefab},blueJewelPrefab:{default:null,type:cc.Prefab},greenJewelPrefab:{default:null,type:cc.Prefab},altarPrefab:{default:null,type:cc.Prefab},fr:{default:null,type:cc.Prefab},lf:{default:null,type:cc.Prefab},lfr:{default:null,type:cc.Prefab},lr:{default:null,type:cc.Prefab},l:{default:null,type:cc.Prefab},f:{default:null,type:cc.Prefab},r:{default:null,type:cc.Prefab},button0Prefab:{default:null,type:cc.Prefab},currentBGM:{default:null,type:cc.AudioSource},mainBGM:{default:null,type:cc.AudioSource},battleSound:{default:null,type:cc.AudioSource},obtainSound:{default:null,type:cc.AudioSource},leftbound:-50,rightbound:50,upbound:-220,downbound:-300},onLoad:function(){this.background=cc.instantiate(this.fr),this.canvas.addChild(this.background,-1),this.setInputControl()},getProperScale:function(){return(700-this.node.y)/1e3},setInputControl:function(){var n=this.node,l=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.KEY.up:if((n.x>l.rightbound+50||n.x<l.leftbound-50)&&n.y>l.upbound)break;if((12==l.currentNode||13==l.currentNode||14==l.currentNode)&&n.y>=l.upbound)break;if(l.battleEngaged)break;if(n.y+=50,l.stepCount--,320<=n.y)switch(l.currentNode){case 0:case 2:case 5:l.background.destroy(),l.background=cc.instantiate(l.fr),l.canvas.addChild(l.background,-1),n.y=-300,l.currentNode+=4;break;case 1:case 3:case 6:l.background.destroy(),l.background=cc.instantiate(l.lf),l.canvas.addChild(l.background,-1),n.y=-300,l.currentNode+=4;break;case 4:case 7:l.background.destroy(),l.background=cc.instantiate(l.f),l.canvas.addChild(l.background,-1),n.y=-300,l.currentNode+=4;break;case 9:case 10:l.background.destroy(),l.background=cc.instantiate(l.lr),l.canvas.addChild(l.background,-1),n.y=-300,l.currentNode+=4;break;case 8:l.background.destroy(),l.background=cc.instantiate(l.r),l.canvas.addChild(l.background,-1),n.y=-300,l.currentNode+=4;break;case 12:case 13:case 14:case 15:n.y-=50,l.stepCount++;break;case 11:l.background.destroy(),l.background=cc.instantiate(l.lfr),l.canvas.addChild(l.background,-1),n.y=-300,l.currentNode+=4}n.setScale(l.getProperScale(),l.getProperScale());break;case cc.KEY.down:if((n.x>l.rightbound+50||n.x<l.leftbound-50)&&n.y<=l.downbound)break;if(l.battleEngaged)break;if(n.y-=50,l.stepCount--,n.y<=-320)switch(l.currentNode){case 5:case 6:l.background.destroy(),l.background=cc.instantiate(l.lfr),l.canvas.addChild(l.background,-1),n.y=300,l.currentNode-=4;break;case 4:case 8:case 10:case 13:l.background.destroy(),l.background=cc.instantiate(l.fr),l.canvas.addChild(l.background,-1),n.y=300,l.currentNode-=4;break;case 7:case 9:case 11:case 14:l.background.destroy(),l.background=cc.instantiate(l.lf),l.canvas.addChild(l.background,-1),n.y=300,l.currentNode-=4;break;case 12:case 15:l.background.destroy(),l.background=cc.instantiate(l.f),l.canvas.addChild(l.background,-1),n.y=300,l.currentNode-=4;break;case 0:case 1:case 2:case 3:n.y+=50,l.stepCount++}n.setScale(l.getProperScale(),l.getProperScale());break;case cc.KEY.left:if((n.x>l.rightbound+50||n.x<l.leftbound)&&n.y>l.upbound+50)break;if((0==l.currentNode||4==l.currentNode||6==l.currentNode||8==l.currentNode||9==l.currentNode||11==l.currentNode||12==l.currentNode)&&n.x<l.leftbound)break;if(l.battleEngaged)break;if(n.x-=50,l.stepCount--,n.x<=-480)switch(l.currentNode){case 2:case 3:case 5:case 6:case 9:l.background.destroy(),l.background=cc.instantiate(l.lfr),l.canvas.addChild(l.background,-1),n.x=480,l.currentNode--;break;case 1:case 5:case 7:case 10:l.background.destroy(),l.background=cc.instantiate(l.fr),l.canvas.addChild(l.background,-1),n.x=480,l.currentNode--;break;case 0:case 4:case 6:case 8:case 9:case 11:case 12:n.x+=50,l.stepCount++;break;case 13:l.background.destroy(),l.background=cc.instantiate(l.r),l.canvas.addChild(l.background,-1),n.x=480,l.currentNode--;break;case 14:case 15:l.background.destroy(),l.background=cc.instantiate(l.lr),l.canvas.addChild(l.background,-1),n.x=480,l.currentNode--}n.setScale(l.getProperScale(),l.getProperScale());break;case cc.KEY.right:if((n.x>l.rightbound||n.x<l.leftbound-50)&&n.y>l.upbound+50)break;if((3==l.currentNode||5==l.currentNode||7==l.currentNode||8==l.currentNode||10==l.currentNode||11==l.currentNode)&&n.x>l.rightbound)break;if(l.battleEngaged)break;if(n.x+=50,l.stepCount--,480<=n.x)switch(l.currentNode){case 0:case 1:l.background.destroy(),l.background=cc.instantiate(l.lfr),l.canvas.addChild(l.background,-1),n.x=-480,l.currentNode++;break;case 2:case 4:case 6:case 9:l.background.destroy(),l.background=cc.instantiate(l.lf),l.canvas.addChild(l.background,-1),n.x=-480,l.currentNode++;break;case 3:case 5:case 7:case 8:case 10:case 11:case 15:n.x-=50,l.stepCount++;break;case 12:case 13:l.background.destroy(),l.background=cc.instantiate(l.lr),l.canvas.addChild(l.background,-1),n.x=-480,l.currentNode++;break;case 14:l.background.destroy(),l.background=cc.instantiate(l.lfr),l.canvas.addChild(l.background,-1),n.x=-480,l.currentNode++}n.setScale(l.getProperScale(),l.getProperScale())}if(l.stepLabel.string="体力："+l.stepCount,l.lifeLabel.string="生命："+l.lifeCount,l.countJewels(),0!=l.stepCount&&0!=l.lifeCount||(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),l.stepLabel.string="你死了！",l.lifeLabel.string="",l.jewelLabel.string="",l.currentBGM.stop(),l.button0=cc.instantiate(l.button0Prefab),l.canvas.addChild(l.button0,1)),3==l.currentNode){if(null==l.monster1&&l.monster1Alive)l.monster1=cc.instantiate(l.monster1Prefab),l.canvas.addChild(l.monster1,-1);else if(null!=l.monster1&&cc.pDistance(n.position,l.monster1.position)<120&&!l.battleEngaged){l.battleEngaged=!0,l.currentBGM.pause(),l.battleSound.play();for(var t=l.monster1.opacity=0,a=0;a<5;a++)setTimeout(function(){l.monster1.opacity=255,n.opacity=0},t+=300),setTimeout(function(){l.monster1.opacity=0,n.opacity=255},t+=300);setTimeout(function(){l.monster1.destroy(),l.monster1=null,l.battleEngaged=!1,l.currentBGM.resume()},t),l.monster1Alive=!1,l.lifeCount--}}else null!=l.monster1&&(l.monster1.destroy(),l.monster1=null);3==l.currentNode?null!=l.redJewel||l.redJewelGot?null!=l.redJewel&&cc.pDistance(n.position,l.redJewel.position)<100&&(l.currentBGM.pause(),l.obtainSound.play(),setTimeout(function(){l.currentBGM.resume()},4e3),l.redJewel.destroy(),l.redJewel=null,l.redJewelGot=!0):(l.redJewel=cc.instantiate(l.redJewelPrefab),l.canvas.addChild(l.redJewel,-1),l.redJewel.y=180):null!=l.redJewel&&(l.redJewel.destroy(),l.redJewel=null),6==l.currentNode?null!=l.yellowJewel||l.yellowJewelGot?null!=l.yellowJewel&&cc.pDistance(n.position,l.yellowJewel.position)<100&&(l.currentBGM.pause(),l.obtainSound.play(),setTimeout(function(){l.currentBGM.resume()},4e3),l.yellowJewel.destroy(),l.yellowJewel=null,l.yellowJewelGot=!0):(l.yellowJewel=cc.instantiate(l.yellowJewelPrefab),l.canvas.addChild(l.yellowJewel,-1)):null!=l.yellowJewel&&(l.yellowJewel.destroy(),l.yellowJewel=null),9==l.currentNode?null!=l.blueJewel||l.blueJewelGot?null!=l.blueJewel&&cc.pDistance(n.position,l.blueJewel.position)<100&&(l.currentBGM.pause(),l.obtainSound.play(),setTimeout(function(){l.currentBGM.resume()},4e3),l.blueJewel.destroy(),l.blueJewel=null,l.blueJewelGot=!0):(l.blueJewel=cc.instantiate(l.blueJewelPrefab),l.canvas.addChild(l.blueJewel,-1)):null!=l.blueJewel&&(l.blueJewel.destroy(),l.blueJewel=null),10==l.currentNode?null!=l.greenJewel||l.greenJewelGot?null!=l.greenJewel&&cc.pDistance(n.position,l.greenJewel.position)<100&&(l.currentBGM.pause(),l.obtainSound.play(),setTimeout(function(){l.currentBGM.resume()},4e3),l.greenJewel.destroy(),l.greenJewel=null,l.greenJewelGot=!0):(l.greenJewel=cc.instantiate(l.greenJewelPrefab),l.canvas.addChild(l.greenJewel,-1)):null!=l.greenJewel&&(l.greenJewel.destroy(),l.greenJewel=null),15==l.currentNode?null==l.altar?(l.altar=cc.instantiate(l.altarPrefab),l.canvas.addChild(l.altar,-1)):l.redJewelGot&&l.yellowJewelGot&&l.blueJewelGot&&l.greenJewelGot&&cc.pDistance(n.position,l.altar.position)<100&&(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.director.loadScene("interlude")):null!=l.altar&&(l.altar.destroy(),l.altar=null),null!=l.layout1.node?(l.layout1.node.destroy(),l.mainBGM.loop=!0,l.mainBGM.play(),l.currentBGM=l.mainBGM):null!=l.layout2.node&&l.layout2.node.destroy()})},countJewels:function(){this.jewelLabel.string="已获得宝石：",this.redJewelGot&&(this.jewelLabel.string+="\n红宝石"),this.yellowJewelGot&&(this.jewelLabel.string+="\n黄宝石"),this.blueJewelGot&&(this.jewelLabel.string+="\n蓝宝石"),this.greenJewelGot&&(this.jewelLabel.string+="\n绿宝石")}}),cc._RF.pop()},{}],Start:[function(e,t,a){"use strict";cc._RF.push(t,"6b600Kh6FNB3qffKZZWwmcD","Start"),cc.Class({extends:cc.Component,properties:{},startGame:function(){cc.director.loadScene("game")},startChallenge:function(){cc.director.loadScene("challenge")},goHome:function(){cc.director.loadScene("titlepage")}}),cc._RF.pop()},{}]},{},["ChangeDialogue","MoneyNode","Player","Player2","Start"]);